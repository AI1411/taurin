# Release Command

バージョンをバンプし、コミット・タグ作成・pushを自動で行う。

引数: $ARGUMENTS (patch / minor / major)

## 処理手順

1. **ブランチ確認**: mainブランチにいること、ワーキングツリーがcleanであることを確認する。mainでなければ中止。

2. **現在バージョン取得**: `src-tauri/tauri.conf.json` の `"version"` フィールドから現在のバージョン（例: `0.1.0`）を読み取る。

3. **次バージョン計算**: 引数 `$ARGUMENTS` に基づいてセマンティックバージョニングで次バージョンを計算する:
   - `patch`: 0.1.0 → 0.1.1
   - `minor`: 0.1.0 → 0.2.0
   - `major`: 0.1.0 → 1.0.0
   - 引数が空の場合は `patch` をデフォルトとする。
   - 引数が無効な場合はエラーメッセージを表示して中止する。

4. **3ファイルのバージョンを更新**:
   - `Cargo.toml`（ルート）の `version = "x.y.z"` を新バージョンに更新
   - `src-tauri/Cargo.toml` の `version = "x.y.z"` を新バージョンに更新
   - `src-tauri/tauri.conf.json` の `"version": "x.y.z"` を新バージョンに更新

5. **ユーザー確認**: 変更内容（旧バージョン → 新バージョン）をユーザーに表示し、続行してよいか確認する。

6. **コミット**: 変更した3ファイルをステージングし、コミットメッセージ `release: v{新バージョン}` でコミットする。

7. **タグ作成**: `v{新バージョン}` でアノテーションタグを作成する。

8. **push**: コミットとタグをリモート（origin）にpushする。
   ```
   git push origin main
   git push origin v{新バージョン}
   ```

9. **完了メッセージ**: リリースが完了したことを表示し、GitHub Actionsのワークフローが自動実行されることを案内する。
