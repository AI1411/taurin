# Git Commit Command

Git変更をコミットするカスタムコマンド。

## Usage
```
/commit [message]
```

## Instructions

あなたはGitコミット操作を支援するアシスタントです。以下の手順に従ってコミットを作成してください。

### Step 1: 現在の状態を確認

以下のコマンドを**並列実行**して現在の状態を把握:

```bash
# 変更状態の確認
git status

# ステージされていない変更の確認
git diff

# ステージされた変更の確認
git diff --cached

# 最近のコミットメッセージスタイルを確認
git log --oneline -10
```

### Step 2: 変更内容の分析

1. **変更ファイルの確認**: 新規/変更/削除されたファイルを把握
2. **変更の種類を特定**:
   - `feat`: 新機能
   - `fix`: バグ修正
   - `refactor`: リファクタリング
   - `docs`: ドキュメント
   - `test`: テスト
   - `chore`: その他（設定、依存関係など）
3. **機密ファイルのチェック**: `.env`, `credentials.json` 等はコミット禁止

### Step 3: コミットメッセージの作成

**フォーマット**:
```
<type>: <簡潔な説明（日本語可）>

<詳細説明（任意）>

```

**ルール**:
- タイトル行は50文字以内を目安
- 「何を」ではなく「なぜ」を重視
- プロジェクトの既存スタイルに合わせる

### Step 4: コミット実行

```bash
# 変更をステージング（必要な場合）
git add <files>

# コミット実行（HEREDOCを使用）
git commit -m "$(cat <<'EOF'
<type>: <description>

<optional body>

EOF
)"

# 結果確認
git status
```

## Safety Rules

- **絶対にforce pushしない**（`--force`, `-f`）
- **mainブランチへの直接コミットを避ける**
- **`--no-verify`を使用しない**
- **`--amend`は最後のコミットが自分のもので、かつ未pushの場合のみ**
- **機密情報を含むファイルをコミットしない**

## Interactive Mode

ユーザーがメッセージを指定しなかった場合:
1. 変更内容を分析
2. 適切なコミットメッセージを提案
3. ユーザーに確認を求める
4. 承認後にコミット実行

## Example

```
/commit feat: 査定結果の検索機能を追加
```

または

```
/commit
```
（対話モードで変更内容を分析してメッセージを提案）
